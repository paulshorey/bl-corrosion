{"version":3,"sources":["webpack:///./src/app/services/corrosion.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAyD;AACI;AAC7D;;EAEE;AACF,IAAM,iBAAiB,GAAG,CAAC,qEAAW,CAAC,UAAU,CAAC;AAClD,uGAAuG;AACvG,IAAM,QAAQ,GAAG,iCAAiC,CAAC;AACnD;;EAEE;AACF,0BAA0B,GAAG,EAAE,OAAO,EAAE,OAAO;IAC9C,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;QAClC,KAAK,CAAC,GAAG,EAAE,OAAO,CAAC;aACjB,IAAI,CAAC,OAAO,CAAC;aACb,KAAK,CAAC,MAAM,CAAC,CAAC;QAChB,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACb,IAAM,CAAC,GAAG,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;YAC5C,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;QAChC,CAAC;IACF,CAAC,CAAC,CAAC;AACJ,CAAC;AACD;;EAEE;AAIF;IAuIC;QAAA,iBAEC;QAxID;;;;;;;;;;;;;;UAcE;QACF,WAAM,GAAG;YACR;;cAEE;YACF,qBAAqB,EAAE,EAAE;YACzB,kBAAkB,EAAE,EAAE;YACtB,sBAAsB,EAAE,GAAG;YAC3B,SAAS,EAAE,EAAE;YACb,oBAAoB,EAAE;gBACrB;oBACC,QAAQ,EAAE,EAAE;oBACZ,WAAW,EAAE,GAAG;iBAChB;aACD;YACD,WAAW,EAAE;gBACZ;oBACC,IAAI,EAAE,yBAAyB;oBAC/B,MAAM,EAAE,CAAC;oBACT,iBAAiB,EAAE,GAAG;oBACtB,oBAAoB,EAAE,KAAK;iBAC3B;aACD;YACD,QAAQ,EAAE,EAAE;YACZ,SAAS,EAAE,EAAE;YACb,WAAW,EAAE,CAAC;YACd;;cAEE;YACF,mBAAmB,EAAE,EAAE;YACvB,uBAAuB,EAAE,GAAG;YAC5B,wBAAwB,EAAE,IAAI;YAC9B,4BAA4B,EAAE,IAAI;YAClC,6BAA6B,EAAE;gBAC9B,iBAAiB,EAAE,GAAG;gBACtB,oBAAoB,EAAE,KAAK;gBAC3B,GAAG,EAAE,CAAC;gBACN,GAAG,EAAE,CAAC;aACN;SACD,CAAC;QACF,mBAAc,GAAQ,EAAE,CAAC;QACzB,kBAAa,GAAG,IAAI,0DAAY,EAAE,CAAC;QACnC;;UAEE;QACF,iBAAY,GAAG;YACd,OAAO,EAAE;gBACR,EAAE,EAAE,SAAS;gBACb,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,EAAE;aACT;YACD,OAAO,EAAE;gBACR,EAAE,EAAE,SAAS;gBACb,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,EAAE;aACT;YACD,OAAO,EAAE;gBACR,EAAE,EAAE,SAAS;gBACb,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,EAAE;aACT;YACD,GAAG,EAAE;gBACJ,EAAE,EAAE,KAAK;gBACT,IAAI,EAAE,KAAK;gBACX,IAAI,EAAE,GAAG;gBACT,KAAK,EAAE,CAAC;gBACR,QAAQ,EAAE,CAAC;gBACX,SAAS,EAAE,CAAC;gBACZ,YAAY,EAAE,EAAE;gBAChB,WAAW,EAAE,EAAE;aACf;YACD,GAAG,EAAE;gBACJ,EAAE,EAAE,KAAK;gBACT,IAAI,EAAE,KAAK;gBACX,IAAI,EAAE,GAAG;gBACT,KAAK,EAAE,CAAC;gBACR,QAAQ,EAAE,CAAC;gBACX,SAAS,EAAE,GAAG;gBACd,YAAY,EAAE,CAAC;gBACf,WAAW,EAAE,GAAG;aAChB;YACD,IAAI,EAAE;gBACL,EAAE,EAAE,MAAM;gBACV,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,KAAK;gBACX,KAAK,EAAE,CAAC;gBACR,QAAQ,EAAE,CAAC;gBACX,SAAS,EAAE,GAAG;gBACd,YAAY,EAAE,GAAG;gBACjB,WAAW,EAAE,IAAI;aACjB;YACD,WAAW,EAAE;gBACZ,EAAE,EAAE,aAAa;gBACjB,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,GAAG;gBACV,QAAQ,EAAE,GAAG;gBACb,SAAS,EAAE,GAAG;gBACd,WAAW,EAAE,GAAG;aAChB;YACD;;cAEE;YACF,QAAQ,EAAE,KAAK;YACf,SAAS,EAAE,KAAK;YAChB,WAAW,EAAE,mBAAS;gBACrB,EAAE,CAAC,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;oBACzB,OAAO,CAAC,GAAG,CAAC,wCAAwC,EAAE,KAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;oBAC/G,KAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,CAAC,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;gBAC1D,CAAC;gBACD,EAAE,CAAC,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;oBAC1B,OAAO,CAAC,GAAG,CAAC,yCAAyC,EAAE,KAAI,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;oBAClH,KAAI,CAAC,YAAY,CAAC,SAAS,GAAG,CAAC,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC;gBAC5D,CAAC;gBACD,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC;YACtC,CAAC;SACD,CAAC;QAwLF,uCAAkC,GAAG;YACpC,KAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,oBAAoB,GAAG,KAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,iBAAiB,GAAG,KAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,GAAG,CAAC;QAC9K,CAAC,CAAC;QACF,uBAAkB,GAAG,kBAAQ;YAC5B,cAAc;YACd,KAAI,CAAC,YAAY,EAAE,CAAC;YACpB,KAAI,CAAC,kCAAkC,EAAE,CAAC;YAC1C,oBAAoB;YACpB,yCAAyC;YACzC,oDAAoD;YACpD,2CAA2C;YAC3C,8CAA8C;YAC9C,oDAAoD;YACpD,OAAO;YACP,MAAM;YACN,KAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,GAAG,GAAG,QAAQ,CAAC,kBAAkB,GAAG,CAAC,CAAC;YAChF,KAAI,CAAC,MAAM,CAAC,mBAAmB,GAAG,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YACrE,KAAI,CAAC,MAAM,CAAC,uBAAuB,GAAG,QAAQ,CAAC,sBAAsB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YAC7E,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,CAAC,uBAAuB,GAAC,GAAG,CAAC,CAAC,CAAC;gBAC7C,KAAI,CAAC,MAAM,CAAC,uBAAuB,GAAG,GAAG,CAAC;YAC3C,CAAC;YACD,KAAI,CAAC,MAAM,CAAC,wBAAwB,GAAG,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YAC1E,KAAI,CAAC,MAAM,CAAC,4BAA4B,GAAG,QAAQ,CAAC,sBAAsB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YAClF,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,CAAC,4BAA4B,GAAC,GAAG,CAAC,CAAC,CAAC;gBAClD,KAAI,CAAC,MAAM,CAAC,4BAA4B,GAAG,GAAG,CAAC;YAChD,CAAC;YACD,KAAI,CAAC,MAAM,CAAC,kBAAkB,GAAG,QAAQ,CAAC,iBAAiB,GAAG,CAAC,CAAC;YAChE,KAAI,CAAC,MAAM,CAAC,sBAAsB,GAAG,QAAQ,CAAC,qBAAqB,GAAG,CAAC,CAAC;YACxE,KAAI,CAAC,MAAM,CAAC,qBAAqB,GAAG,QAAQ,CAAC,oBAAoB,GAAG,CAAC,CAAC;YACtE,aAAa;YACb,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,CAAC,wBAAwB,IAAI,KAAI,CAAC,MAAM,CAAC,mBAAmB,GAAG,KAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC;gBACjH,KAAI,CAAC,MAAM,CAAC,SAAS,IAAI,aAAa,CAAC;YACxC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,KAAI,CAAC,MAAM,CAAC,SAAS,IAAI,YAAY,CAAC;YACvC,CAAC;QACF,CAAC,CAAC;QAzND,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IACtD,CAAC;IACD;;;;;;;;;;;;;;MAcE;IACK,0CAAe,GAAtB,UAAuB,WAAW;QACjC,IAAI,CAAC,GAAG,WAAW,CAAC;QACpB,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACzE,CAAC;IACM,8BAAG,GAAV,UAAW,IAAI;QACd,EAAE,CAAC,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;YACvB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACpB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,KAAK,cAAc,CAAC,CAAC,CAAC;YACpC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;QAC1B,CAAC;IACF,CAAC;IACM,mEAAwC,GAA/C,UAAgD,GAAG,EAAE,KAAK;QACzD,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;QAClB,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;YACf,KAAK,GAAG,CAAC,CAAC;QACX,CAAC;QACD,EAAE,CAAC,CAAC,GAAG,KAAK,sBAAsB,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,iBAAiB,CAAC,CAAC,CAAC;gBACzE,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,iBAAiB,CAAC;YACrE,CAAC;QACF,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;QACvD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACtC,CAAC;IACD;;;;;;;;;;;;;;MAcE;IACW,uDAA4B,GAAzC;;;gBACC;;kBAEE;gBACF,IAAI,CAAC,kCAAkC,EAAE,CAAC;gBAC1C;;kBAEE;gBACF,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;;;KACrC;IACY,iDAAsB,GAAnC;;;;;;wBACC,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;wBAI3E,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;wBACpD,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;wBACzC,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;wBACzC,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;wBACzC,eAAe,GAAG,OAAO,GAAG,OAAO,GAAG,OAAO,CAAC;wBAClD,OAAO,GAAG,OAAO,GAAG,eAAe,CAAC;wBACpC,OAAO,GAAG,OAAO,GAAG,eAAe,CAAC;wBACpC,OAAO,GAAG,OAAO,GAAG,eAAe,CAAC;wBACpC,YAAY,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,GAAG,OAAO,GAAG,IAAI,GAAG,OAAO,GAAG,GAAG,GAAG,OAAO,CAAC;wBACzE,YAAY,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,GAAG,OAAO,GAAG,CAAC,GAAG,OAAO,GAAG,GAAG,GAAG,OAAO,CAAC;wBACrE,QAAQ;wBACR,mDAAmD;wBACnD,6BAA6B;wBAC7B,6BAA6B;wBAC7B,6BAA6B;wBAC7B,UAAU;wBACV,OAAO,YAAY,CAAC,OAAO,CAAC;wBAC5B,OAAO,YAAY,CAAC,OAAO,CAAC;wBAC5B,OAAO,YAAY,CAAC,OAAO,CAAC;wBAC5B,OAAO;wBACP,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC;4BAChC,OAAO,YAAY,CAAC,GAAG,CAAC;wBACzB,CAAC;wBACD,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;4BACjC,OAAO,YAAY,CAAC,IAAI,CAAC;wBAC1B,CAAC;wBAIG,OAAO,GAAG;4BACb,mBAAmB,EAAE,IAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,iBAAiB;4BAChF,sBAAsB,EAAE,IAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,oBAAoB;4BACtF,YAAY,EAAE,EAAE;yBAChB,CAAC;wBACF,GAAG,CAAC,CAAK,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC;4BACxB,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;4BACxB,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;gCAC9B,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC;oCACzB,EAAE,EAAE,CAAC,CAAC,EAAE;oCACR,KAAK,EAAE,CAAC,CAAC,KAAK;iCACd,CAAC,CAAC;4BACJ,CAAC;wBACF,CAAC;wBACD,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;wBAI5B,SAAS,GAAG,IAAI,CAAC;wBACrB,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC;4BACvB,SAAS,GAAG,GAAG,CAAC;wBACjB,CAAC;wBACS,qBAAM,KAAK,CAAC,QAAQ,EAAE;gCAC/B,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;gCAC7B,KAAK,EAAE,UAAU;gCACjB,OAAO,EAAE;oCACR,cAAc,EAAE,kBAAkB;iCAClC;gCACD,MAAM,EAAE,MAAM;gCACd,IAAI,EAAE,MAAM;6BACZ,CAAC;;wBARE,GAAG,GAAG,SAQR;wBAIa,qBAAM,GAAG,CAAC,IAAI,EAAE;;wBAA3B,QAAQ,GAAG,SAAgB;wBACzB,MAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;wBAClC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;wBAClC,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;wBAClC;;0BAEE;wBACF,EAAE,CAAC,CAAC,QAAQ,CAAC,kBAAkB,IAAI,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BACnE,WAAW;4BACX,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;wBACnC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BAEH,CAAC,GAAG,gFAAgF,CAAC;4BACrF,GAAG,GAAG,iCAAiC,GAAG,CAAC,GAAG,6CAA6C,CAAC;4BAChG,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;4BAClB,KAAK,CAAC,GAAG,CAAC,CAAC;4BACX,MAAM,gBAAC;wBACR,CAAC;wBACD;;0BAEE;wBACF,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,eAAe,CAAC;wBAC1C,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;wBAC7C,qBAAqB;wBACpB,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;wBACxC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;;;;KAEtC;IACD;;;;;;;;;;;;;;MAcE;IACF,uCAAY,GAAZ;QACC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;QACrD,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,EAAE,CAAC;IAC5B,CAAC;IA7TW,gBAAgB;QAH5B,gEAAU,CAAC;YACX,UAAU,EAAE,MAAM;SAClB,CAAC;;OACW,gBAAgB,CAkW5B;IAAD,uBAAC;CAAA;AAlW4B","file":"routes-demo-demo-module~routes-test-test-module.js","sourcesContent":["import { Injectable, EventEmitter } from \"@angular/core\";\nimport { environment } from \"../../environments/environment\";\n/*\n\tconst\n*/\nconst USE_REMOTE_SERVER = !environment.production;\n// const BEAPIURL = \"http://\" + (USE_REMOTE_SERVER ? \"10.1.111.193\" : \"localhost\") + \":5000/calculate\";\nconst BEAPIURL = \"http://localhost:5000/calculate\";\n/*\n\tlib\n*/\nfunction fetchWithTimeout(url, options, timeout) {\n\treturn new Promise((resolve, reject) => {\n\t\tfetch(url, options)\n\t\t\t.then(resolve)\n\t\t\t.catch(reject);\n\t\tif (timeout) {\n\t\t\tconst e = new Error(\"Connection timed out\");\n\t\t\tsetTimeout(reject, timeout, e);\n\t\t}\n\t});\n}\n/*\n\tclass\n*/\n@Injectable({\n\tprovidedIn: \"root\"\n})\nexport class CorrosionService {\n\t/*\n\n\n\n\n\n\n\tfront-end model >>>\n\n\n\n\n\n\n\t*/\n\tstatus = {\n\t\t/*\n\t\t\tstatus:\n\t\t*/\n\t\tlifetime_manufacturer: 10,\n\t\tlifetime_corrected: 10,\n\t\tlifetime_correctedProb: 100,\n\t\tclassList: \"\",\n\t\tlifetimes_calculated: [\n\t\t\t{\n\t\t\t\tlifetime: 10,\n\t\t\t\tprobability: 100\n\t\t\t}\n\t\t],\n\t\tcorrections: [\n\t\t\t{\n\t\t\t\ttype: \"add corrosion inhibitor\",\n\t\t\t\tamount: 1,\n\t\t\t\tconstraintPerUnit: 100,\n\t\t\t\tconstraintUpperLimit: 10000\n\t\t\t}\n\t\t],\n\t\tproblems: [],\n\t\tsolutions: [],\n\t\tcrude_bblhr: 0,\n\t\t/*\n\t\t\tdepreciated:\n\t\t*/\n\t\tlifetime_calculated: 10,\n\t\tlifetime_calculatedProb: 100,\n\t\tlifetime_calculatedWorst: null,\n\t\tlifetime_calculatedWorstProb: null,\n\t\tcorrection_corrosionInhibitor: {\n\t\t\tconstraintPerUnit: 100,\n\t\t\tconstraintUpperLimit: 10000,\n\t\t\tadd: 0,\n\t\t\tper: 0\n\t\t}\n\t};\n\tstatusOriginal: any = {};\n\tstatusUpdated = new EventEmitter();\n\t/*\n\t\tmeasurements:\n\t*/\n\tmeasurements = {\n\t\tcrude_a: {\n\t\t\tid: \"crude_a\",\n\t\t\tname: \"Crude Type A\",\n\t\t\tunit: \"bbl/hr\",\n\t\t\tvalue: 10\n\t\t},\n\t\tcrude_b: {\n\t\t\tid: \"crude_b\",\n\t\t\tname: \"Crude Type B\",\n\t\t\tunit: \"bbl/hr\",\n\t\t\tvalue: 20\n\t\t},\n\t\tcrude_c: {\n\t\t\tid: \"crude_c\",\n\t\t\tname: \"Crude Type C\",\n\t\t\tunit: \"bbl/hr\",\n\t\t\tvalue: 30\n\t\t},\n\t\th2o: {\n\t\t\tid: \"h2o\",\n\t\t\tname: \"H2O\",\n\t\t\tunit: \"%\",\n\t\t\tvalue: 0,\n\t\t\tstatusOk: 0,\n\t\t\tstatusBad: 5,\n\t\t\tstatusDanger: 10,\n\t\t\tstatusAlert: 15\n\t\t},\n\t\th2s: {\n\t\t\tid: \"h2s\",\n\t\t\tname: \"H2S\",\n\t\t\tunit: \"%\",\n\t\t\tvalue: 0,\n\t\t\tstatusOk: 0,\n\t\t\tstatusBad: 0.5,\n\t\t\tstatusDanger: 1,\n\t\t\tstatusAlert: 1.5\n\t\t},\n\t\tsalt: {\n\t\t\tid: \"salt\",\n\t\t\tname: \"Salt\",\n\t\t\tunit: \"ppm\",\n\t\t\tvalue: 0,\n\t\t\tstatusOk: 0,\n\t\t\tstatusBad: 100,\n\t\t\tstatusDanger: 500,\n\t\t\tstatusAlert: 1000\n\t\t},\n\t\ttemperature: {\n\t\t\tid: \"temperature\",\n\t\t\tname: \"Temp.\",\n\t\t\tunit: \"Â°C\",\n\t\t\tvalue: 289,\n\t\t\tstatusOk: 289,\n\t\t\tstatusBad: 290,\n\t\t\tstatusAlert: 291\n\t\t},\n\t\t/*\n\t\t\tomit\n\t\t*/\n\t\tomit_h2s: false,\n\t\tomit_salt: false,\n\t\tomit_toggle: omit_what => {\n\t\t\tif (omit_what === \"h2s\") {\n\t\t\t\tconsole.log(\"omit_toggle this.measurements.omit_h2s\", this.measurements.omit_h2s, !this.measurements.omit_h2s);\n\t\t\t\tthis.measurements.omit_h2s = !this.measurements.omit_h2s;\n\t\t\t}\n\t\t\tif (omit_what === \"salt\") {\n\t\t\t\tconsole.log(\"omit_toggle this.measurements.omit_salt\", this.measurements.omit_salt, !this.measurements.omit_salt);\n\t\t\t\tthis.measurements.omit_salt = !this.measurements.omit_salt;\n\t\t\t}\n\t\t\tthis.statusUpdated.emit(this.status);\n\t\t}\n\t};\n\tconstructor() {\n\t\tthis.statusOriginal = Object.assign({}, this.status);\n\t}\n\t/*\n\n\n\n\n\n\n\tpublic classes - user input\n\n\n\n\n\n\n\t*/\n\tpublic set_measurement(measurement) {\n\t\tvar m = measurement;\n\t\tthis.measurements[m.id] = Object.assign({}, this.measurements[m.id], m);\n\t}\n\tpublic get(what) {\n\t\tif (what === \"status\") {\n\t\t\treturn this.status;\n\t\t} else if (what === \"measurements\") {\n\t\t\treturn this.measurements;\n\t\t}\n\t}\n\tpublic set_status_correction_corrosionInhibitor(key, value) {\n\t\tvalue = value / 1;\n\t\tif (value < 0) {\n\t\t\tvalue = 0;\n\t\t}\n\t\tif (key === \"constraintUpperLimit\") {\n\t\t\tif (value < this.status.correction_corrosionInhibitor.constraintPerUnit) {\n\t\t\t\tvalue = this.status.correction_corrosionInhibitor.constraintPerUnit;\n\t\t\t}\n\t\t}\n\t\tthis.status.correction_corrosionInhibitor[key] = value;\n\t\tthis.statusUpdated.emit(this.status);\n\t}\n\t/*\n\n\n\n\t\t\n\n\n\t\tpublic classes - no user input, use existing data\n\n\n\n\n\n\n\t*/\n\tpublic async calculate_corrosionInhibitor() {\n\t\t/*\n\t\t\tcalculate\n\t\t*/\n\t\tthis.set_constraints_corrosionInhibitor();\n\t\t/*\n\t\t\temit\n\t\t*/\n\t\tthis.statusUpdated.emit(this.status);\n\t}\n\tpublic async calculate_measurements() {\n\t\tconsole.log(\"calculate_measurements, status:\", Object.assign({}, this.status));\n\t\t/*\n\t\t\tcrude / measurements\n\t\t*/\n\t\tvar measurements = Object.assign({}, this.measurements);\n\t\tvar crude_a = measurements.crude_a.value / 1;\n\t\tvar crude_b = measurements.crude_b.value / 1;\n\t\tvar crude_c = measurements.crude_c.value / 1;\n\t\tvar crude_abc_total = crude_a + crude_b + crude_c;\n\t\tcrude_a = crude_a / crude_abc_total;\n\t\tcrude_b = crude_b / crude_abc_total;\n\t\tcrude_c = crude_c / crude_abc_total;\n\t\tmeasurements.salt.value = 400 * crude_a + 1200 * crude_b + 100 * crude_c;\n\t\tmeasurements.h2s.value = 0.5 * crude_a + 2 * crude_b + 1.2 * crude_c;\n\t\t// debug\n\t\t// console.log(\"crude_abc_total\", crude_abc_total);\n\t\t// console.log(\"a\", crude_a);\n\t\t// console.log(\"b\", crude_b);\n\t\t// console.log(\"c\", crude_c);\n\t\t// cleanup\n\t\tdelete measurements.crude_a;\n\t\tdelete measurements.crude_b;\n\t\tdelete measurements.crude_c;\n\t\t// omit\n\t\tif (this.measurements.omit_h2s) {\n\t\t\tdelete measurements.h2s;\n\t\t}\n\t\tif (this.measurements.omit_salt) {\n\t\t\tdelete measurements.salt;\n\t\t}\n\t\t/*\n\t\t\trequest\n\t\t*/\n\t\tvar request = {\n\t\t\tconstraint_per_unit: this.status.correction_corrosionInhibitor.constraintPerUnit,\n\t\t\tconstraint_upper_limit: this.status.correction_corrosionInhibitor.constraintUpperLimit,\n\t\t\tmeasurements: []\n\t\t};\n\t\tfor (let k in measurements) {\n\t\t\tlet v = measurements[k];\n\t\t\tif (v.value || v.value === 0) {\n\t\t\t\trequest.measurements.push({\n\t\t\t\t\tid: v.id,\n\t\t\t\t\tvalue: v.value\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tconsole.log(\"request\", request);\n\t\t/*\n\t\t\tfetch\n\t\t*/\n\t\tvar fetchWait = 3000;\n\t\tif (USE_REMOTE_SERVER) {\n\t\t\tfetchWait = 300;\n\t\t}\n\t\tvar res = await fetch(BEAPIURL, {\n\t\t\tbody: JSON.stringify(request),\n\t\t\tcache: \"no-cache\",\n\t\t\theaders: {\n\t\t\t\t\"content-type\": \"application/json\"\n\t\t\t},\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"cors\"\n\t\t});\n\t\t/*\n\t\t\tresponse\n\t\t*/\n\t\tvar response = await res.json();\n\t\t(<any>window).response = response;\n\t\tconsole.log(\"response\", response);\n\t\tthis.set_status_backend(response);\n\t\t/*\n\t\t\tcalculate\n\t\t*/\n\t\tif (response.lifetimeCalculated && response.lifetimeCalculated[0]) {\n\t\t\t// back-end\n\t\t\tthis.set_status_backend(response);\n\t\t} else {\n\t\t\t// front-end\n\t\t\tvar e = \"Bad response from server. Expecting lifetimeCalculated to be array of numbers.\";\n\t\t\tvar err = \"API request failed with error: \" + e + \"... Will use 'mock' 'dummy' front-end logic\";\n\t\t\tconsole.warn(err);\n\t\t\talert(err);\n\t\t\treturn;\n\t\t}\n\t\t/*\n\t\t\temit\n\t\t*/\n\t\tthis.status.crude_bblhr = crude_abc_total;\n\t\tthis.statusUpdated.emit(this.statusOriginal);\n\t\t// setTimeout(() => {\n\t\t\tconsole.log(\"this.status\", this.status);\n\t\t\tthis.statusUpdated.emit(this.status);\n\t\t// }, 150);\n\t}\n\t/*\n\n\n\n\t\t\n\n\n\t\tprivate classes - logic and calculations\n\n\n\n\n\n\n\t*/\n\treset_status() {\n\t\tthis.status = Object.assign({}, this.statusOriginal);\n\t\tthis.status.problems = [];\n\t\tthis.status.solutions = [];\n\t}\n\tset_constraints_corrosionInhibitor = () => {\n\t\tthis.status.correction_corrosionInhibitor.constraintUpperLimit = this.status.correction_corrosionInhibitor.constraintPerUnit * this.status.correction_corrosionInhibitor.add;\n\t};\n\tset_status_backend = response => {\n\t\t// first reset\n\t\tthis.reset_status();\n\t\tthis.set_constraints_corrosionInhibitor();\n\t\t// important details\n\t\t// this.status.lifetimes_calculated = [];\n\t\t// response.lifetimeCalculated.forEach((val, i) => {\n\t\t// \tthis.status.lifetimes_calculated.push({\n\t\t// \t\tlifetime: response.lifetimeCalculated[i],\n\t\t// \t\tprobability: response.lifetimeCalculatedProb[i]\n\t\t// \t});\n\t\t// });\n\t\tthis.status.correction_corrosionInhibitor.add = response.corrosionInhibitor / 1;\n\t\tthis.status.lifetime_calculated = response.lifetimeCalculated[0] / 1;\n\t\tthis.status.lifetime_calculatedProb = response.lifetimeCalculatedProb[0] / 1;\n\t\tif (this.status.lifetime_calculatedProb>100) {\n\t\t\tthis.status.lifetime_calculatedProb = 100;\n\t\t}\n\t\tthis.status.lifetime_calculatedWorst = response.lifetimeCalculated[1] / 1;\n\t\tthis.status.lifetime_calculatedWorstProb = response.lifetimeCalculatedProb[1] / 1;\n\t\tif (this.status.lifetime_calculatedWorstProb>100) {\n\t\t\tthis.status.lifetime_calculatedWorstProb = 100;\n\t\t}\n\t\tthis.status.lifetime_corrected = response.lifetimeCorrected / 1;\n\t\tthis.status.lifetime_correctedProb = response.lifetimeCorrectedProb / 1;\n\t\tthis.status.lifetime_manufacturer = response.lifetimeManufacturer / 1;\n\t\t/// classList\n\t\tif (this.status.lifetime_calculatedWorst || this.status.lifetime_calculated < this.status.lifetime_manufacturer) {\n\t\t\tthis.status.classList += \" status-bad\";\n\t\t} else {\n\t\t\tthis.status.classList += \" status-ok\";\n\t\t}\n\t};\n}\n"],"sourceRoot":""}